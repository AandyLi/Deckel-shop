@using Deckel_Shop.Session;

@model Cart;

@{
    ViewData["Title"] = "Saved Shopping Cart";

    var cart = SessionHelper.Get<Cart>(Context.Session, "cart");
}

<section class="shopping-cart dark">
    <div class="block-heading">
        <h2>Shopping Cart</h2>
        <p>Your Shopping Cart contains the following products:</p>
    </div>
    @if (Model != null)
    {
        <table class="table table-hover">
            <thead class="thead-light">
                <tr>
                    <th scope="col" class="text-center">Image</th>
                    <th scope="col" class="text-center">Product ID</th>
                    <th scope="col" class="text-center">Name</th>
                    <th scope="col" class="text-center">Price</th>
                    @*<th scope="col" class="text-center">Amount</th>*@
                    <th scope="col" class="text-center">Qty</th>
                    @*<th></th>*@
                    <th class="text-center">Total Price</th>
                </tr>
            </thead>
            <tbody>
                @{ var totalPrice = 0.0M; }
                @foreach (var product in Model.Products)
                {
                    var productTotal = product.Price * product.Amount;
                    totalPrice += productTotal;
                    <tr>
                        <td class="text-right">
                            <img src="@product.ImgName2" width="150" height="150" />
                        </td>
                        <th class="text-center">@product.Id</th>
                        <td class="text-center">@product.Name</td>
                        <td class="text-center">@product.Price</td>
                        @*<td class="text-center">@product.Amount</td>*@
                        <td class="text-center">
                            <div class="col-md-6 quantity m-auto">
                                @*<label for="quantity">Quantity:</label>*@
                                <div class="input-group">
                                    <input id="quantity" type="number" value="@product.Amount" class="form-control quantity-input" readonly>
                                    <div class="input-group-append ">
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal-deleteOrder" style="background-color:transparent">
                                            <i class="far fa-trash-alt"></i>
                                        </button>
                                        <button type="button" id="editBtn"  class="btn btn-primary" style="background-color:transparent">
                                            <i class="far fa-edit"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="text-center">@productTotal</td>
                    </tr>
                }
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    @*<td></td>*@
                    <td></td>
                    <th class="text-center">@totalPrice SEK</th>
                </tr>

            </tbody>
        </table>
    }

    <hr />


    <div class="col-md-6 col-lg-4 m-auto">
        @*<div class="summary">
            <h3>Summary</h3>
            <div class="summary-item"><span class="text">Subtotal</span><span class="price">$360</span></div>
            <div class="summary-item"><span class="text">Discount</span><span class="price">$0</span></div>
            <div class="summary-item"><span class="text">Shipping</span><span class="price">$0</span></div>
            <div class="summary-item"><span class="text">Total</span><span class="price"></span></div>*@

        <a asp-controller="cart" asp-action="checkout" class="btn btn-primary btn-lg btn-block">Checkout</a>
        @*</div>
            </div>*@
    </div>


</section>

