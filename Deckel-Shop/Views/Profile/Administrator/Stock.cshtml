@model IEnumerable<Database.Models.Product>;


@*nav bar*@
<ul class="nav nav-tabs nav-tabs">
    <li class="nav-item ">
        <a class="nav-link" asp- asp-action="Administrator">Pending Orders</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" asp-action="DeliveredOrders">Delivered Orders</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" asp-action="Admin_customerList">Customer List</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" asp-action="Users">User List</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active" asp-action="Stock">Stock</a>
    </li>
</ul>

@*search bar*@
<div>

    <div class="row mt-3 pt-3 mb-3">
        <div class="col-sm-4">
            <div class="input-group">
                <input type="text" class="form-control searchbarForTable" placeholder="Search by Order#, Customer# etc">
                <div class="input-group-append">
                    <button class="input-group-text"><i class="fa fa-search"></i></button>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="d-flex">
                <div class="dropdown mr-1">
                    <button type="button" class="btn btn-secondary dropdown-toggle" id="dropdownMenuOffset" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-offset="10,20">
                        Status
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuOffset">
                        <form asp-action="Stock">
                            <button name="filter" class="dropdown-item" value="0">All Products</button>
                            <button name="filter" class="dropdown-item" value="1">Available Products</button>
                            <button name="filter" class="dropdown-item" value="2">Removed Products</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        @*row with title and NEW:button modal*@

        @*---------------------------------------------------------------------------------*@
        <!-- NEW: Button trigger modal -->
        <div class="col-sm-6 text-right">
            <button type="button" class="btn btn-light" data-toggle="modal" data-target="#exampleModal-Product" style="background-color:transparent">
                <i class="far fa-plus-square"></i> Add product
            </button>
        </div>
    </div>
</div>

@*line break*@
<div class="row">
    <div class="col">
        <hr>
    </div>
</div>


@*stock table*@

<div class="row">
    <div class="col-12">
        <table class="table table-striped table-bordered dt-responsive display nowrap table-image">
            <thead>
                <tr>
                    <th scope="col">PRODUCT#</th>
                    <th scope="col">PRODUCT NAME</th>
                    <th scope="col">AMOUNT</th>
                    <th scope="col">PRICE</th>
                    <th scope="col">Status</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody class="tableSearch">
                @foreach (var p in Model)
                {
                    <tr>
                        <td>
                            @p.Id
                        </td>
                        <td>
                            @p.Name
                        </td>
                        <td>
                            @p.Amount
                        </td>
                        <td>
                            @p.Price
                        </td>
                        <td>
                            @p.Status
                        </td>
                        <td>
                            <span data-toggle="tooltip" data-placement="bottom" title="info">
                                <button type="button" onclick="GetModalInfo(@p.Id, 'stockDetails')" class="btn btn-light" data-toggle="modal" data-target="#exampleModal-details" style="background-color:transparent">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </span>
                            @if (p.Status == "Available")
                            {
                                <span data-toggle="tooltip" data-placement="bottom" title="delete">
                                    <button onclick="RemoveProduct(@p.Id)" type="button" class="btn btn-light" data-toggle="modal" data-target="#exampleModal-delete" style="background-color:transparent">
                                        <i class="far fa-trash-alt"></i>
                                    </button>
                                </span>
                            }
                            else
                            {
                                <span data-toggle="tooltip" data-placement="bottom" title="Add Back To Stock">
                                    <button onclick="AddBackToStock(@p.Id)" type="button" class="btn btn-light" data-toggle="modal" data-target="#exampleModal-AddToStock" style="background-color:transparent">
                                        <i class="far fa-plus-square"></i>
                                    </button>
                                </span>
                            }
                        </td>
                    </tr>

                }

            </tbody>
        </table>
    </div>
</div>

<!--Add Product Modal -->
<div class="modal fade" id="exampleModal-Product" tabindex="-1" aria-labelledby="exampleModalProduct-Label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="DeckelModal modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New Product</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form asp-action="AddProduct">
                    @*start of form*@
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputStockID">Product ID</label>
                            <input type="text" class="form-control" id="inputProductID">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputName">Product Name</label>
                            <input name="Name" type="text" class="form-control" id="inputName">
                        </div>
                    </div>
                    <div class="form-row">


                        <div class="form-group col-md-6">
                            <label for="inputAmount">Amount</label>
                            <input name="Amount" type="text" class="form-control" id="inputAmount">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputPrice">Price</label>
                            <input name="Price" type="text" class="form-control" id="inputPrice">
                        </div>
                    </div>
                    @*uploading image*@
                    <div>
                        <label for="inputZip">Image</label>
                        <div class="container mt-5">
                            <div class="col-sm-12 col-lg-8 mr-auto ml-auto border p-8">
                                <div method="post" enctype="multipart/form-data">
                                    <div class="form-group">
                                        <label><strong>Upload Files</strong></label>
                                        <div class="custom-file">
                                            <input type="file" name="ImgName" multiple class="custom-file-input form-control" id="customFile">
                                            <label class="custom-file-label" for="customFile">Choose file</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button type="button" name="upload" value="upload" id="upload" class="btn btn-block btn-dark"><i class="fa fa-fw fa-upload"></i> Upload</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*end of form*@
                    <div class="modal-footer">
                        <input type="submit" value="save" class="btn btn-primary" />
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

<!--Detail Modal -->
<div class="modal fade" id="exampleModal-details" tabindex="-1" aria-labelledby="exampleModal-detailsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="DeckelModal modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Product info</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                <span aria-hidden="true">&times;</span>
            </div>
            <div class="modal-body">
                <form>
                    @*start of form*@
                    <div class="form-row">
                        <div class="col-md-12 text-right">
                            <button type="button" id="editBtn" onclick="enableForm()" class="btn btn-light" style="background-color:transparent">
                                <i class="far fa-edit"></i>Edit
                            </button>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="ProductID">Product ID</label>
                            <input type="text" class="form-control" id="detailsProductID" name="detailsProductID" disabled />
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputProductName">Product Name</label>
                            <input type="text" class="form-control" id="detailsProductName" name="detailsProductName" disabled>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputAmount">Amount</label>
                            <input type="text" class="form-control" id="detailsAmount" name="detailsAmount" disabled>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputPrice">Price</label>
                            <input type="email" class="form-control" id="detailsPrice" name="detailsPrice" disabled>
                        </div>
                    </div>
                    <div class="form-group col-md-10">
                        <label for="inputPrice">Image</label>
                        <img src="..." alt="..." class="img-thumbnail">
                    </div>
                    @*end of form*@
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!--Delete Modal -->
<div class="modal fade" id="exampleModal-delete" tabindex="-1" aria-labelledby="exampleModal-deleteLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="DeckelModal modal-content">
            @*<div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>*@
            <div class="modal-body">
                Delete Product?
            </div>
            <div class="modal-footer">
                <form asp-action="RemoveProduct">
                      <button name="id" id="DeleteBtn" value="" class="btn btn-danger">JAJAMEEEEN</button>
                </form>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

@* Add back to stock modal*@
<div class="modal fade" id="exampleModal-AddToStock" tabindex="-1" aria-labelledby="exampleModal-AddLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="DeckelModal modal-content">
            <form asp-action="AddProductBackToStock">
                <div class="modal-body">
                    <label for="inputAmount">Amount</label>
                    <input name="StockAmount" type="number" class="form-control" id="inputStockAmount">
                </div>
                <div class="modal-footer">

                    <button name="id" id="AddBackToStockBtn" value="" class="btn btn-danger">JAJAMEEEEN</button>

                    <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>
